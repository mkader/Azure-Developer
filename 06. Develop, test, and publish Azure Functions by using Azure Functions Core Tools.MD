# Develop, test, and publish Azure Functions by using Azure Functions Core Tools

* [Function run local](https://learn.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=windows%2Cisolated-process%2Cnode-v4%2Cpython-v2%2Chttp-trigger%2Ccontainer-apps&pivots=programming-language-csharp)
## Introduction
* The Azure Functions Core Tools are CL utilities that let you develop and run functions locally, and then publish them to Azure.

* Car dealership franchise. The salespeople are always looking for ways to modernize their workflow. Build a set of applications backed by Azure Functions. The first service built loan interest calculation can be called over the web to run. 

##  Create and run Azure Functions locally by using the Core Tools
* Building a simple interest calculator, by developing it locally and not in the Azure portal's functions editor. 
* Use VS or VSC, but decide to use the Core Tools from the command line and a basic text editor.

* What are the Azure Functions Core Tools (AFCT)?
    1. The AFCT are a set of command-line tools that you can use to develop and test Azure Functions on your local computer.
    1. The Core Tools feature different kinds of functions-related capabilities, but their primary purpose is to:
        1. Generate the files and folders you need to develop functions on your local computer.
        1. Run your functions locally so you can test and debug them.
        1. Publish your functions to Azure.
    1. The Core Tools are packaged as a single command-line utility named func. If you run func from the command line without any other commands, it will display version information and a usage guide.
    1. ![](https://learn.microsoft.com/en-us/training/modules/develop-test-deploy-azure-functions-with-core-tools/media/2-func-help-output.png)
    1. The Core Tools are standalone utilities, not an extension of a larger IDE or tool. You can accomplish the above tasks with nothing but the command line and the Core Tools. 
    
* Core Tools versions
    1. 2 different versions of the Core Tools: versions 1.x and 2.x. 
    1. Use the latest 2.x, as it offers the best support for most scenarios.

* Function apps and functions projects
    1. Every function published to Azure belongs to a function app, which is a collection of one or more functions that Azure publishes together into the same environment. 
        1. All of the functions in a function app share a common set of configuration values. 
        1. Build them all for the same language runtime. 
        1. A function app is an Azure resource that can be configured and managed independently.
    1. When you develop functions locally, you work within a functions project. 
        1. The project is a folder that contains the code and configuration files that define your functions. 
        1. A functions project on your computer is equivalent to a function app in Azure, and can contain multiple functions that use the same language runtime.
    1. To start developing locally on your computer, you need to create a functions project folder that's organized correctly.
        1. Every new function you add to the project requires additional code and a configuration. 
        1. They must be complete and correctly structured, or your functions won't run.
    1. With the Azure Functions Core Tools, generate function projects and functions from scratch.

* Create a new functions project, run func init on the command line.
    1. ![](https://learn.microsoft.com/en-us/training/modules/develop-test-deploy-azure-functions-with-core-tools/media/2-func-init-output.png)
    1. func init will ask you which language runtime you'd like to use for the app and tailor the project folder's contents appropriately.
    1. When you create a new functions project, the files included in the project folder depend on the language runtime you select. 
    1. Regardless of the runtime you choose, the two most critical project files are always present:
        1. host.json - stores runtime configuration values, such as logging options, for the function app. The settings stored in this file are used both when running functions locally and in Azure.
        1. local.settings.json - stores configuration values that only apply to the function app when it's run locally with the Core Tools. This file contains two kinds of settings:
            1. Local runtime settings: Used to configure the local functions runtime itself.
            1. Custom application settings: You add and configure them based on your app's needs. All the functions in the app can access and use them.
    1. Functions projects that func init generates don't have any functions in them. Let's find out how to add one.

* Create a new function with func new
    1. Each individual function in a project requires code and a configuration to define its behavior. 
    1. Running func new in a functions project folder will create a new function and all the files you need to get started developing.
    1. ![](https://learn.microsoft.com/en-us/training/modules/develop-test-deploy-azure-functions-with-core-tools/media/2-func-new-output.png)
    1. After asking you which kind of function trigger you want to use and what you'd like to name your function, func new will generate a complete, publish-ready starter implementation in your function project's chosen language. 
    1. The starter code illustrates how to use the type of trigger you selected and is there to help you get started quickly: just replace the body of the function with your own implementation, and you're ready to build, run, test, and publish.
    
* Run functions locally
    1. Functions aren't programs that can be run on their own: they must be hosted. 
    1. The function host is what powers everything outside of your function code: it loads the configuration, listens for triggers and HTTP requests, starts the worker process for the language your functions are written in, writes log output, and more. In Azure, function apps run the function host automatically when they start.
    1. use the Core Tools to run your own instance of the functions host and try out your functions locally before you publish them. 
    1. By running your functions before publishing them, you can make sure your configuration and code loads correctly and test out your functions by making real HTTP calls to them without the need for Azure resources.
    1. To start the functions host locally, run func start from a functions project folder. 
        1. At the end of the output, the Core Tools will display local URLs you can use to call each of your functions. 
        1. While the host is running, you can use any tools or libraries that make HTTP calls, like curl, to interact with your functions. The Core Tools will write any log output produced by the host to the terminal in real time.
    1. [](https://learn.microsoft.com/en-us/training/modules/develop-test-deploy-azure-functions-with-core-tools/media/2-func-start-output.png)