# Chain Azure Functions together using input and output bindings

## Introduction
* Suppose you run a social networking site for professionals. You're allowing your users to upload their headshot images to be posted on their profile. 
* To reduce the workload on the web server, you want to create a serverless back end using Azure Functions to process this data.
* You want to create an image thumbnail and then save it to permanent storage.

## Explore input and output binding types
* Accessing and processing data are key tasks in many software solutions. Consider some of these scenarios:
    1. You've been asked to implement a way to move incoming data from Azure Blob Storage to Azure Cosmos DB.
    1. You want to post incoming messages to a queue for processing by another component in your enterprise.
    1. Your service needs to grab gamer scores from a queue and update an online scoreboard.
* All of these examples are about moving data. The data source and destinations differ from scenario to scenario, but the pattern is similar. 
* connect to a data source, and you read and write data. Azure Functions helps you integrate with data and services by using bindings.

* What is a binding?
    1. In Azure Functions, bindings provide a declarative way to connect to data from within your code. They make it easier to integrate with data streams consistently in a function. 
    1. can have multiple bindings providing access to different data elements. This integration is powerful because you can connect to your data sources without having to code specific connection logic (like database connections or web API interfaces).

* Types of bindings - There are two kinds of bindings you can use with functions:
    1. Input binding - Connects to a data source. Our function can read data from these input sources.
    1. Output binding - Connects to a data destination. Our function can write data to these output destinations.
    1. There are also triggers, which are special types of input bindings that cause a function to run. For example, an Azure Event Grid notification can be configured as a trigger. When an event occurs, the function runs.

* Types of supported bindings
    1. The type of binding defines where we're reading or sending data. There's a binding to respond to web requests, and a large selection of bindings to interact directly with various Azure services and third-party services.
    1. A binding type can be used as an input, an output, or both. For example, a function can write to a Blob Storage output binding, but a Blob Storage update could trigger another function.
    1. Common binding types include: Blob Storage, Azure Service Bus Queues, Azure Cosmos DB, Azure Event Hubs, External files, External tables, HTTP endpoints

* Binding properties - 3 properties are required in all bindings, might have to supply more properties based on the type of binding and storage you're using.
    1. Name - Defines the function parameter through which you access the data. For example, in a queue input binding, this property is the name of the function parameter that receives the queue message content.
    1. Type - Identifies the type of binding. For example, the type of data or service you want to interact with.
    1. Direction - Indicates the direction data is flowing. For example, is it an input or output binding?
    1. Additionally, most binding types also need a fourth property:
        1. Connection - Provides the name of an app setting key that contains the connection string. Bindings use connection strings stored in app settings to keep secrets out of the function code. Connection strings make your code more configurable and secure.

* Create a binding
    1. Bindings are defined in JSON. A binding is configured in your function's configuration file (function.json) and lives in the same folder as your function code.
    1. Let's examine a sample input binding:
    ```
        {
        "name": "headshotBlob",
        "type": "blob",
        "path": "thumbnail-images/{filename}",
        "connection": "HeadshotStorageConnection",
        "direction": "in"
        },
    ```
    1. To create this binding, we:
        1. Create a binding in our function.json file.
        1. Provide the value for the name variable. In this example, the variable holds the blob data.
        1. Provide the storage type. In the preceding example, we're using Blob Storage.
        1. Provide the path, which specifies the container and the item name that goes in it. 
            1. The path property is required when using the blob trigger, with curly braces around the filename portion of the path. 
            1. This syntax creates a binding expression that allows you to reference the blob's name in other bindings, and in your function's code. 
            1. In this example, a parameter on the function named filename would be populated with the filename of the blob that triggered the function.
        1. Provide the connection string setting name defined in the application's settings file. It's used as a key to find the connection string to connect to your storage account.
        1. Define the direction as in. It reads data from the blob.
    1. Bindings are used to connect to data in your function. In this example, we used an input binding to connect user images for processing by our function as thumbnails.

## Exercise - Explore input and output binding types